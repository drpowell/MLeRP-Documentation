<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>MLeRP User Guide Documentation – vscode</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../.././images/favicon-32x32.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../.././images/mstile-150x150.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MLeRP User Guide Documentation</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../index.html" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../faq.html">
 <span class="menu-text">MLeRP FAQ</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dask-slurm.html">
 <span class="menu-text">Quick Start</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://mlerp.cloud.edu.au/launch">
 <span class="menu-text">Log in</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://forms.gle/p9HWS79yxDouP6Tu8">
 <span class="menu-text">Sign up</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../about.html" class="sidebar-item-text sidebar-link">About MLeRP</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../faq.html" class="sidebar-item-text sidebar-link">MLeRP FAQ</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../strudelv2_spa/docs/vscode.html" class="sidebar-item-text sidebar-link active">Introduction</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dask-slurm.html" class="sidebar-item-text sidebar-link">Dask SLURMClusters</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dask-pytorch.html" class="sidebar-item-text sidebar-link">PyTorch and Dask</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#set-up-instructions-only-do-these-once" id="toc-set-up-instructions-only-do-these-once" class="nav-link" data-scroll-target="#set-up-instructions-only-do-these-once">Set-Up Instructions (only do these once)</a>
  <ul class="collapse">
  <li><a href="#prepare-vs-code" id="toc-prepare-vs-code" class="nav-link" data-scroll-target="#prepare-vs-code">1. Prepare VS Code</a></li>
  <li><a href="#generate-an-ssh-key-and-add-it-to-the-ssh-agent" id="toc-generate-an-ssh-key-and-add-it-to-the-ssh-agent" class="nav-link" data-scroll-target="#generate-an-ssh-key-and-add-it-to-the-ssh-agent">2. Generate an ssh key and add it to the ssh agent</a></li>
  <li><a href="#configure-vs-code" id="toc-configure-vs-code" class="nav-link" data-scroll-target="#configure-vs-code">3. Configure VS Code</a></li>
  </ul></li>
  <li><a href="#using-your-vs-code-remote-server-do-these-every-time-you-need-a-vs-code-session-on-m3" id="toc-using-your-vs-code-remote-server-do-these-every-time-you-need-a-vs-code-session-on-m3" class="nav-link" data-scroll-target="#using-your-vs-code-remote-server-do-these-every-time-you-need-a-vs-code-session-on-m3">Using your VS Code remote server (do these every time you need a VS Code session on M3)</a>
  <ul class="collapse">
  <li><a href="#allocate-resources-for-the-remote-server-i.e.-start-a-job" id="toc-allocate-resources-for-the-remote-server-i.e.-start-a-job" class="nav-link" data-scroll-target="#allocate-resources-for-the-remote-server-i.e.-start-a-job">4. Allocate resources for the remote server (i.e.&nbsp;start a job)</a></li>
  <li><a href="#test-the-connection" id="toc-test-the-connection" class="nav-link" data-scroll-target="#test-the-connection">5. Test the connection</a></li>
  <li><a href="#start-the-remote-server" id="toc-start-the-remote-server" class="nav-link" data-scroll-target="#start-the-remote-server">6. Start the remote server</a></li>
  </ul></li>
  <li><a href="#faq" id="toc-faq" class="nav-link" data-scroll-target="#faq">FAQ:</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>[[<em>TOC</em>]]</p>
<p>So you’d like to use <a href="https://code.visualstudio.com/">Visual Studio Code</a>, but you need access to M3 too - maybe your data is on the cluster, or you want to run code interactively on a GPU, or you just really love VS Code. No problem. You want a VS Code remote server.</p>
<p>Please <strong>do NOT</strong> follow the <a href="https://code.visualstudio.com/docs/remote/ssh">official VS Code documentation for remote servers</a>.</p>
<p>By default, if you follow those instructions, you will end up running the VS Code remote server on the login node. Please don’t do this, the login nodes are a shared resource and we would rather allocate a resource just for you.</p>
</section>
<section id="set-up-instructions-only-do-these-once" class="level2">
<h2 class="anchored" data-anchor-id="set-up-instructions-only-do-these-once">Set-Up Instructions (only do these once)</h2>
<section id="prepare-vs-code" class="level3">
<h3 class="anchored" data-anchor-id="prepare-vs-code">1. Prepare VS Code</h3>
<ol type="1">
<li>Install <a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
<li>Install the <a href="https://aka.ms/vscode-remote/download/extension">Remote Development Extension Pack</a></li>
<li>Open <code>Settings</code> with <code>Ctrl+,</code> and search for <code>Remote.SSH: Remote Server Listen On Socket</code>. Select the checkbox. <img src="https://code.visualstudio.com/assets/docs/remote/ssh/ssh-listen-on-socket.png" class="img-fluid" alt="ssh-listen-on-socket-settings-screen"></li>
</ol>
</section>
<section id="generate-an-ssh-key-and-add-it-to-the-ssh-agent" class="level3">
<h3 class="anchored" data-anchor-id="generate-an-ssh-key-and-add-it-to-the-ssh-agent">2. Generate an ssh key and add it to the ssh agent</h3>
<p>You may be familiar with using passwords to authenticate to M3 - ssh keys are another, more secure method of doing this. If you’re unfamiliar with ssh keys, no worries - we’ll step you through how to set one up here. If you want to learn more about why ssh keys are more secure than passwords, <a href="https://www.youtube.com/watch?v=dPAw4opzN9g">This YouTube video does a good job of explaining it,</a> even if it is designed for an AWS user.</p>
<p>The process for creating keys and adding them to your ssh agent differs between Windows and Linux/Mac.</p>
<details>
<summary>
<b>Mac and Linux Instructions</b>
</summary>
<p><br></p>
<p><em>Note: These instructions will refer to your local terminal, as well as the Strudel2 terminal. Pay attention!</em></p>
<p>Firstly, we need to generate an ssh key-pair. Open a local terminal, and run the following command:</p>
<pre><code>ssh-keygen -t ed25519</code></pre>
<p>You will be asked where you would like to save the keys. Press enter to keep the default location. You will also be asked to enter a passphrase. This will be used to encrypt the private key on your computer. There will be a print out of your key’s fingerprint and location on the screen.</p>
<p>You should now have a public and private key in your <code>~/.ssh</code> directory, which will be named <code>id_ed25519.pub</code> and <code>id_ed25519</code> respectively. Never share your private key with someone else.</p>
<p>Secondly, you will need to copy your public key into M3. To do this, run the following command:</p>
<pre><code>cat ~/.ssh/id_ed25519.pub                                                                                                       </code></pre>
<p>Copy the line of text printed on the screen.</p>
<p>Start a terminal session in <a href="https://beta.desktop.cvl.org.au/login">Strudel2</a> by selecting <code>Terminal</code> from the sidebar on the left-hand side of the screen, and then selecting <code>Run on Login Node</code>. This will open a terminal on M3 in a new tab. Ensure you have copied the public key from before, and run the following command in the Strudel2 terminal:</p>
<pre><code>echo &lt;paste the line you just copied&gt; &gt;&gt; .ssh/authorized_keys</code></pre>
<p>This will add your public key to M3 and allow you to authenticate using your new ssh-keys. Close the terminal tab and terminate the terminal session.</p>
<p>Finally, you will want to add your ssh keys to the ssh-agent. You will remember setting a passphrase earlier for accessing your private key. When you add a private key to the ssh-agent, it will ask for your passphrase once, and then remember it until the next time your computer reboots. This means you won’t need to enter a passphrase everytime you log in to M3 with your keys.</p>
<p>To do this, open a local terminal and run:</p>
<pre><code>ssh-add ~/.ssh/id_ed25519</code></pre>
</details>
<details>
<summary>
<b>Windows Instructions</b>
</summary>
<p><br></p>
<section id="install-and-enable-openssh" class="level4">
<h4 class="anchored" data-anchor-id="install-and-enable-openssh">Install and enable OpenSSH</h4>
<p>Before we can generate keys on Windows, OpenSSH has to be installed and enabled.</p>
<ol type="1">
<li>Check OpenSSH is installed.</li>
</ol>
<ul>
<li>Navigate to <code>Setting &gt; Apps &gt; Apps &amp; Features</code></li>
<li>Select <code>Optional Features</code>.</li>
<li>Check if <code>OpenSSH Client</code> is in the list. If it is, go to step 2.</li>
<li>If it isn’t, select the <code>Add a feature</code> button at the top of the page, then select <code>OpenSSH Client</code>, and <code>Install</code>. This will install the OpenSSH Client.</li>
</ul>
<ol start="2" type="1">
<li>Once installed, you will need to start the OpenSSH Client.</li>
</ol>
<ul>
<li>Use the Windows search bar to search for and open <code>Services</code>.</li>
<li>Scroll through the list to find <code>OpenSSH Authentication Agent</code></li>
<li>Double click <code>OpenSSH Authentication Agent</code>. Change the Startup type to <code>Automatic</code> and select <code>OK</code>.</li>
<li>Double click on <code>OpenSSH Authentication Agent</code> again and select <code>Start</code>.</li>
</ul>
<p>The OpenSSH Agent will start automatically in future. Now we can create your ssh keys!</p>
</section>
<section id="create-ssh-keys-and-add-them-to-the-ssh-agent" class="level4">
<h4 class="anchored" data-anchor-id="create-ssh-keys-and-add-them-to-the-ssh-agent">Create ssh keys and add them to the ssh-agent</h4>
<p><em>Note: These instructions will refer to your local PowerShell terminal, as well as the Strudel2 terminal. Pay attention!</em></p>
<p>Firstly, we need to generate an ssh key-pair. Open a Powershell terminal, and run the following command:</p>
<pre><code>ssh-keygen -t ed25519</code></pre>
<p>You will be asked where you would like to save the keys. Press enter to keep the default location. You will also be asked to enter a passphrase. This will be used to encrypt the private key on your computer. There will be a print out of your key’s fingerprint and location on the screen.</p>
<p>You should now have a public and private key in your <code>~/.ssh</code> directory, which will be named <code>id_ed25519.pub</code> and <code>id_ed25519</code> respectively. Never share your private key with someone else.</p>
<p>Secondly, you will need to copy your public key into M3. To do this, run the following command:</p>
<pre><code>cat ~/.ssh/id_ed25519.pub </code></pre>
<p>Copy the line of text printed on the screen.</p>
<p>Start a terminal session in <a href="https://beta.desktop.cvl.org.au/login">Strudel2</a> by selecting <code>Terminal</code> from the sidebar on the left-hand side of the screen, and then selecting <code>Run on Login Node</code>. This will open a terminal on M3 in a new tab. Ensure you have copied the public key from before, and run the following command in the Strudel2 terminal:</p>
<pre><code>echo &lt;paste the line you just copied&gt; &gt;&gt; .ssh/authorized_keys</code></pre>
<p>This will add your public key to M3 and allow you to authenticate using your new ssh-keys.</p>
<p>Finally, you will want to add your ssh keys to the ssh agent. You will remember setting a passphrase earlier for accessing your private key. When you add a private key to the ssh-agent, it will ask for your passphrase once, and then remember it until the next time your computer reboots. This means you won’t need to enter a passphrase everytime you log in to M3 with your keys.</p>
<p>Copy paste the location of your private key, which would have been printed on the screen in your PowerShell terminal earlier. For example, <code>C:\Users\username/.ssh/id_ed25519</code>. Run the following in your PowerShell terminal to add the key to your ssh-agent:</p>
<pre><code>ssh-add ~/.ssh/id_ed25519</code></pre>
</section></details>
</section>
</section>
<section id="configure-vs-code" class="level3">
<h3 class="anchored" data-anchor-id="configure-vs-code">3. Configure VS Code</h3>
<p>Open VS Code and open the Command Palette (F1). In the dropdown menu, select <code>Remote-SSH: Add New SSH Host...</code> , or click on the Add New icon in the SSH Remote Explorer in the Activity Bar.</p>
<p>You’ll then be asked to enter the SSH connection information. Make sure you replace <code>&lt;username&gt;</code> with your M3 username.</p>

<details>
<summary>
<b>Linux and Mac</b>
</summary>
<p><br></p>
<p>On Linux and Mac, enter:</p>
<pre><code>ssh -l &lt;username&gt; VSCode -o ProxyCommand="ssh &lt;username&gt;@m3.massive.org.au /usr/local/sv2/sshnc.sh"</code></pre>
</details>
<details>
<summary>
<b>Windows </b>
</summary>
<p><br></p>
<p>On Windows enter:</p>
<pre><code>ssh -l &lt;username&gt; VSCode -o ProxyCommand="ssh.exe &lt;username&gt;@m3.massive.org.au /usr/local/sv2/sshnc.sh"</code></pre>
</details>
<p>The proxycommand allows us to connect, not to the login nodes but to a node allocated just to you. This is different than a regular VSCode setup because you’re on a shared HPC cluster, not a regular server.</p>
</section>

<section id="using-your-vs-code-remote-server-do-these-every-time-you-need-a-vs-code-session-on-m3" class="level2">
<h2 class="anchored" data-anchor-id="using-your-vs-code-remote-server-do-these-every-time-you-need-a-vs-code-session-on-m3">Using your VS Code remote server (do these every time you need a VS Code session on M3)</h2>
<section id="allocate-resources-for-the-remote-server-i.e.-start-a-job" class="level3">
<h3 class="anchored" data-anchor-id="allocate-resources-for-the-remote-server-i.e.-start-a-job">4. Allocate resources for the remote server (i.e.&nbsp;start a job)</h3>
<p>Using <a href="https://beta.cloud.cvl.org.au">Strudel2</a> in your web browser, login to CVL and select and JupyterLab based application. Choose the resources you will need, including GPU type, number of CPUs, amount of RAM and time, and click <code>Launch</code>. Wait for the job to begin running under <code>Pending/Running Jupyter Labs</code>.</p>
</section>
<section id="test-the-connection" class="level3">
<h3 class="anchored" data-anchor-id="test-the-connection">5. Test the connection</h3>
<details>
<summary>
<b>Linux and Mac</b>
</summary>
<p><br></p>
<p>Open a terminal and on Linux and Mac enter:</p>
<pre><code>ssh -l &lt;username&gt; VSCode -o ProxyCommand="ssh &lt;username&gt;@m3.massive.org.au /usr/local/sv2/sshnc.sh"</code></pre>
</details>
<details>
<summary>
<b>Windows</b>
</summary>
<p><br></p>
<p>On Windows, open a PowerShell terminal and enter:</p>
<pre><code>ssh -l &lt;username&gt; VSCode -o ProxyCommand="ssh.exe &lt;username&gt;@m3.massive.org.au /usr/local/sv2/sshnc.sh"</code></pre>
</details>
<p>Verify that you can connect to M3. If you experience difficulties, this is the point to reach out to help@massive.org.au. This step will also prompt you to accept the public key for M3.</p>
</section>
<section id="start-the-remote-server" class="level3">
<h3 class="anchored" data-anchor-id="start-the-remote-server">6. Start the remote server</h3>
<p>Open VS Code and open the Command Palette (F1). Select <code>Remote-SSH: Connect to Host</code> from the dropdown menu and select the <code>VSCode</code> host. If you didn’t add the private ssh key to the agent, VS Code will prompt you for your key passphrase It will ask twice (once to the connect to the login nodes, then again to connect to the node running the remote server).</p>
<p>VS Code will also ask you what type of server it is, select Linux.</p>
<p>Then you should be good to go.</p>
</section>
</section>
<section id="faq" class="level2">
<h2 class="anchored" data-anchor-id="faq">FAQ:</h2>
<p>Q: I see a message about “Connection Reset by peer”:</p>
<p>A: This will happen if you fail to authenticate too many times - perhaps typing in your key passphrase incorrectly. Wait 10 minutes, and try again. If you still run into errors please contact the helpdesk at help@massive.org.au</p>
<p>Q: I keep getting prompted for a password even though I’m using a key</p>
<p>A: Check that your connection command includes the username everwhere you need it (it should be in there twice, once for the login node and once for the compute node). Also, ensure you added your keys to the ssh-agent to avoid typing your key passphrase every time. You will need to do this after every reboot.</p>
<p>Q: I got an error message about posix spawn</p>
<p>A: You’re probably on Windows. Check that you used the Windows specific command line with ssh.exe instead of ssh</p>
<p>Q: I tried to use the ssh-agent but it says “Permissions <code>mykey</code> are too open.</p>
<p>A: Private keys should never be shared - ensure only you have read, write, and execute permissions on your private key. Linux/Mac user see <a href="https://stackoverflow.com/questions/9270734/ssh-permissions-are-too-open-error">This StackOverflow post</a>. Windows Users, see <a href="https://itectec.com/superuser/windows-ssh-permissions-for-private-key-are-too-open/">This blog post</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>